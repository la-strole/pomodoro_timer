<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      http-equiv="Content-Security-Policy"
      content="
     
            font-src 'self' https://fonts.googleapis.com https://fonts.gstatic.com; 
            script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; 
            style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com;"
    />

    <link
      href="https://fonts.googleapis.com/css?family=Droid Serif"
      rel="stylesheet"
    />

    <!-- https://getbootstrap.com/docs/5.1/  -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />

    <link href="css/styles.css" rel="stylesheet" />

    <!-- https://getbootstrap.com/docs/5.1/ -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>

    <script type="module" src="js/pomodoro.js"></script>
    <script type="module" src="js/auth.js"></script>

    <title>Pomodoro timer</title>
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <p class="nav-link pseudolink" id="navUserName"></p>
            <p class="nav-link active pseudolink" id="navLoginLink">Login</p>
            <p class="nav-link pseudolink" id="navLogoutLink">Logout</p>
            <p class="nav-link disabled pseudolink" id="navDetails">Details</p>
            <p class="nav-link disabled" id="row_pomo_number">
              0 pomodoro in a row
            </p>
            <p class="nav-link disabled" id="asana_task_count"></p>
          </div>
        </div>
      </div>
    </nav>

    <div
      class="offcanvas offcanvas-top h-auto"
      tabindex="-1"
      id="offcanvasLogin"
      aria-labelledby="offcanvasLoginLabel"
    >
      <div class="offcanvas-header">
        <h5 id="offcanvasLoginLabel">Login</h5>
        <button
          type="button"
          class="btn-close text-reset"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body container">
        <form class="form-signin" id="logInForm">
          <h1 class="h3 mb-3 fw-normal">Please log in</h1>

          <div class="form-floating">
            <input
              type="text"
              class="form-control inputfield"
              id="loginUsername"
              name="username"
              placeholder="Usename"
              required
              maxlength="12"
              autofocus
            />
            <label for="loginUsername">Username</label>
          </div>
          <div class="form-floating input-group mb-3">
            <input
              type="password"
              class="form-control lastinput"
              id="loginPassword"
              name="password"
              placeholder="Password"
              autocomplete="current-password"
              maxlength="16"
              minlength="6"
              required
            />
            <label for="loginPassword">Password</label>
            <span class="input-group-text showPasswordButton">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-eye-fill"
                viewBox="0 0 16 16"
              >
                <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z" />
                <path
                  d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"
                />
              </svg>
            </span>
          </div>
          <button
            class="w-100 btn btn-lg btn-primary"
            type="submit"
            id="loginButton"
          >
            Log in
          </button>
          <p class="mt-3 col pseudolink" id="signInLink">Sign in</p>
        </form>
      </div>
    </div>
    <div
      class="offcanvas offcanvas-top h-auto"
      tabindex="-1"
      id="offcanvasSignIn"
      aria-labelledby="offcanvasSignInLabel"
    >
      <div class="offcanvas-header">
        <h5 id="offcanvasSignInLabel">Sign In</h5>
        <button
          type="button"
          class="btn-close text-reset"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body container">
        <form class="form-signin" id="signInForm">
          <h1 class="h3 mb-3 fw-normal">Please sign in</h1>

          <div class="form-floating">
            <input
              type="text"
              class="form-control inputfield"
              id="signinUsername"
              name="username"
              placeholder="Usename"
              maxlength="12"
              required
              autofocus
            />
            <label for="signinUsername">Username</label>
          </div>
          <div class="form-floating input-group">
            <input
              type="password"
              class="form-control inputfield"
              id="signinPassword"
              name="password"
              placeholder="Password"
              autocomplete="new-password"
              maxlength="16"
              minlength="6"
              required
            />
            <label for="signinPassword">Password</label>
            <span class="input-group-text showPasswordButton">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-eye-fill"
                viewBox="0 0 16 16"
              >
                <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z" />
                <path
                  d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"
                />
              </svg>
            </span>
          </div>
          <div class="form-floating mb-3">
            <input
              type="text"
              class="form-control lastinput"
              id="asanaAPI"
              name="asanaAPI"
              placeholder="Asana PAT"
              maxlength="51"
              minlength="51"
            />
            <label for="asanaAPI">Asana PAT</label>
          </div>
          <div class="row">
            <a class="col-6" href="https://app.asana.com/0/my-apps"
              >Create Asana PAT</a
            >
            <span class="pseudolink col-6 text-end mb-4" id="backToLoginPage"
              >Log In</span
            >
          </div>
          <button
            class="w-100 btn btn-lg btn-primary"
            type="submit"
            id="signinButton"
          >
            Sign in
          </button>
        </form>
      </div>
    </div>
    <main class="container-lg">
      <section class="row align-items-center">
        <div class="col-sm-8 mx-auto text-center">
          <div>
            <span id="minute">25:</span>
            <span id="second">00</span>
          </div>
          <h2 id="taskNameHeader" data-id=""></h2>
          <div class="row justify-content-center" id="control_div">
            <div class="col-4 btn-group m-4 p-0">
              <button
                value="start"
                id="btn_stop"
                type="button"
                class="col-8 btn btn-outline-primary btn-lg"
              >
                Start
              </button>
              <button
                type="button"
                class="col-4 btn btn-outline-primary dropdown-toggle-split p-0"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                style="display: none"
                id="asana_task_dropdown"
              >
                <span class="badge bg-primary" id="asana_task_number"></span>
                <span class="visually-hidden">Toggle Dropdown</span>
              </button>
              <table class="dropdown-menu table table-secondary table-hover">
                <tbody id="asana_tasks_list"></tbody>
              </table>
            </div>
            <button
              value="pause"
              id="btn_pause"
              type="button"
              disabled
              class="col-4 btn btn-outline-primary btn-lg m-4"
            >
              Pause
            </button>
          </div>
        </div>
        <div class="col-sm-4">
          <img
            src="../assets/images/1.jpg"
            alt="growing tree"
            id="current_tree"
            class="img-fluid"
          />
          <img
            src="../assets/images/break.gif"
            alt="brearking time"
            id="breaking_time"
            class="img-fluid mx-auto my-auto w-50"
            style="display: none"
          />
        </div>
      </section>

      <section class="album py-5">
        <div class="container p-0">
          <div
            class="row row-cols-2 row-cols-sm-3 row-cols-md-6 g-3"
            id="garden"
          >
            <!-- Add new tree to the garden -->
          </div>
        </div>
      </section>

      <div
        class="offcanvas offcanvas-top"
        tabindex="-1"
        id="myOffcanvas"
        aria-labelledby="offcanvasTopLabel"
      >
        <div class="offcanvas-header">
          <h5 id="offcanvasTopLabel">Settings</h5>
          <button
            type="button"
            class="btn-close text-reset"
            data-bs-dismiss="offcanvas"
            aria-label="Close"
          ></button>
        </div>

        <div class="offcanvas-body container-fluid h-auto">
          <form
            class="row justify-content-start align-items-center"
            id="settings_form"
          >
            <div class="row">
              <label for="pomo_set_minutes" class="col-lg-2 col-4"
                >Pomo time</label
              >
              <input
                type="number"
                class="col-lg-1 col-4"
                id="pomo_set_minutes"
                name="pomo_set_minutes"
                value="25"
                min="1"
                max="60"
              />
            </div>
            <div class="row">
              <label for="br_set_minutes" class="col-lg-2 col-4"
                >Break time</label
              >
              <input
                type="number"
                class="col-lg-1 col-4"
                id="br_set_minutes"
                name="br_set_minutes"
                value="5"
                min="1"
                max="60"
              />
            </div>
            <div class="row">
              <label for="lbr_set_minutes" class="col-lg-2 col-4"
                >LB time</label
              >
              <input
                type="number"
                class="col-lg-1 col-4"
                id="lbr_set_minutes"
                name="lbr_set_minutes"
                value="30"
                min="1"
                max="60"
              />
            </div>
            <div class="row">
              <label for="lbr_after" class="col-lg-2 col-4">LB after</label>
              <input
                type="number"
                class="col-lg-1 col-4"
                id="lbr_after"
                name="lbr_after"
                value="4"
                min="1"
                max="10"
              />
            </div>
            <div class="row align-items-center justify-content-start">
              <button
                type="submit"
                class="col-lg-1 col-4 btn btn-primary mb-3 mt-3 me-2"
                id="confirm_button"
              >
                Confirm
              </button>
              <div class="col-lg-1 col-1"></div>
              <div
                class="col-lg-2 col-6 align-items-center form-switch justify-content-center ms-2"
              >
                <input
                  class="form-check-input"
                  type="checkbox"
                  role="switch"
                  id="breaks"
                  checked
                />
                <label class="form-check-label text-center" for="breaks"
                  >Add breaks</label
                >
              </div>
            </div>
          </form>
        </div>
      </div>
    </main>
  </body>
</html>
